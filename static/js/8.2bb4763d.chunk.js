(this["webpackJsonptruffle-react-redux-dapp"]=this["webpackJsonptruffle-react-redux-dapp"]||[]).push([[8],{851:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return o})),n.d(t,"d",(function(){return i}));var r=["Unbonded","Bonded","Unbonding"],a=["ProposalDeposit","GovernVoteTimeout","SlashTimeout","MinValidatorNum","MaxValidatorNum","MinStakeInPool","AdvanceNoticePeriod"],o={Voting:"1",Closed:"2"},i={Yes:1,No:2,Abstain:3}},953:function(e,t,n){"use strict";n.r(t);var r=n(27),a=n(57),o=n(58),i=n(60),c=n(59),l=n(0),s=n.n(l),u=n(1),f=n.n(u),p=n(44),m=n.n(p),d=n(84),y=n(844),h=n(3),v=n.n(h),b=n(21),g=n(866),P=n(97),O=n(876),E=n(253),S=n(193);function C(e){if(!l.isValidElement(e))return e;for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return l.cloneElement.apply(l,[e].concat(n))}function j(e){return(j="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function w(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function x(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function k(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function N(e,t){return(N=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function z(e,t){return!t||"object"!==j(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function I(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function M(e){return(M=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function T(){return(T=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var V=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n};function _(e,t){return e[t]&&Math.floor(24/e[t])}var A=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&N(e,t)}(i,e);var t,n,r,a,o=(t=i,function(){var e,n=M(t);if(I()){var r=M(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return z(this,e)});function i(){var e;return x(this,i),(e=o.apply(this,arguments)).renderItem=function(t){var n=t.getPrefixCls,r=e.context,a=r.grid,o=r.itemLayout,i=e.props,c=i.prefixCls,s=i.children,u=i.actions,f=i.extra,p=i.className,m=V(i,["prefixCls","children","actions","extra","className"]),d=n("list",c),y=u&&u.length>0&&l.createElement("ul",{className:"".concat(d,"-item-action"),key:"actions"},u.map((function(e,t){return l.createElement("li",{key:"".concat(d,"-item-action-").concat(t)},e,t!==u.length-1&&l.createElement("em",{className:"".concat(d,"-item-action-split")}))}))),h=a?"div":"li",b=l.createElement(h,T({},m,{className:v()("".concat(d,"-item"),p,w({},"".concat(d,"-item-no-flex"),!e.isFlexMode()))}),"vertical"===o&&f?[l.createElement("div",{className:"".concat(d,"-item-main"),key:"content"},s,y),l.createElement("div",{className:"".concat(d,"-item-extra"),key:"extra"},f)]:[s,y,C(f,{key:"extra"})]);return a?l.createElement(S.a,{span:_(a,"column"),xs:_(a,"xs"),sm:_(a,"sm"),md:_(a,"md"),lg:_(a,"lg"),xl:_(a,"xl"),xxl:_(a,"xxl")},b):b},e}return n=i,(r=[{key:"isItemContainsTextNodeAndNotSingular",value:function(){var e,t=this.props.children;return l.Children.forEach(t,(function(t){"string"===typeof t&&(e=!0)})),e&&l.Children.count(t)>1}},{key:"isFlexMode",value:function(){var e=this.props.extra;return"vertical"===this.context.itemLayout?!!e:!this.isItemContainsTextNodeAndNotSingular()}},{key:"render",value:function(){return l.createElement(P.a,null,this.renderItem)}}])&&k(n.prototype,r),a&&k(n,a),i}(l.Component);function D(e){return(D="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function R(e){return function(e){if(Array.isArray(e))return L(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return L(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return L(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function L(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function F(){return(F=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function q(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function U(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function G(e,t){return(G=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function J(e,t){return!t||"object"!==D(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function K(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function B(e){return(B=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}A.Meta=function(e){return l.createElement(P.a,null,(function(t){var n=t.getPrefixCls,r=e.prefixCls,a=e.className,o=e.avatar,i=e.title,c=e.description,s=V(e,["prefixCls","className","avatar","title","description"]),u=n("list",r),f=v()("".concat(u,"-item-meta"),a),p=l.createElement("div",{className:"".concat(u,"-item-meta-content")},i&&l.createElement("h4",{className:"".concat(u,"-item-meta-title")},i),c&&l.createElement("div",{className:"".concat(u,"-item-meta-description")},c));return l.createElement("div",T({},s,{className:f}),o&&l.createElement("div",{className:"".concat(u,"-item-meta-avatar")},o),(i||c)&&p)}))},A.contextTypes={grid:u.any,itemLayout:u.string};var H=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n},Y=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&G(e,t)}(i,e);var t,n,r,a,o=(t=i,function(){var e,n=B(t);if(K()){var r=B(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return J(this,e)});function i(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,e)).defaultPaginationProps={current:1,total:0},t.keys={},t.onPaginationChange=t.triggerPaginationEvent("onChange"),t.onPaginationShowSizeChange=t.triggerPaginationEvent("onShowSizeChange"),t.renderItem=function(e,n){var r,a=t.props,o=a.renderItem,i=a.rowKey;return o?((r="function"===typeof i?i(e):"string"===typeof i?e[i]:e.key)||(r="list-item-".concat(n)),t.keys[n]=r,o(e,n)):null},t.renderEmpty=function(e,n){var r=t.props.locale;return l.createElement("div",{className:"".concat(e,"-empty-text")},r&&r.emptyText||n("List"))},t.renderList=function(e){var n,r=e.getPrefixCls,a=e.renderEmpty,o=t.state,i=o.paginationCurrent,c=o.paginationSize,s=t.props,u=s.prefixCls,f=s.bordered,p=s.split,m=s.className,d=s.children,y=s.itemLayout,h=s.loadMore,P=s.pagination,S=s.grid,C=s.dataSource,j=void 0===C?[]:C,w=s.size,x=s.header,k=s.footer,N=s.loading,z=H(s,["prefixCls","bordered","split","className","children","itemLayout","loadMore","pagination","grid","dataSource","size","header","footer","loading"]),I=r("list",u),M=N;"boolean"===typeof M&&(M={spinning:M});var T=M&&M.spinning,V="";switch(w){case"large":V="lg";break;case"small":V="sm"}var _=v()(I,m,(q(n={},"".concat(I,"-vertical"),"vertical"===y),q(n,"".concat(I,"-").concat(V),V),q(n,"".concat(I,"-split"),p),q(n,"".concat(I,"-bordered"),f),q(n,"".concat(I,"-loading"),T),q(n,"".concat(I,"-grid"),S),q(n,"".concat(I,"-something-after-last-item"),t.isSomethingAfterLastItem()),n)),A=F(F(F({},t.defaultPaginationProps),{total:j.length,current:i,pageSize:c}),P||{}),D=Math.ceil(A.total/A.pageSize);A.current>D&&(A.current=D);var L,U=P?l.createElement("div",{className:"".concat(I,"-pagination")},l.createElement(O.a,F({},A,{onChange:t.onPaginationChange,onShowSizeChange:t.onPaginationShowSizeChange}))):null,G=R(j);if(P&&j.length>(A.current-1)*A.pageSize&&(G=R(j).splice((A.current-1)*A.pageSize,A.pageSize)),L=T&&l.createElement("div",{style:{minHeight:53}}),G.length>0){var J=G.map((function(e,n){return t.renderItem(e,n)})),K=[];l.Children.forEach(J,(function(e,n){K.push(l.cloneElement(e,{key:t.keys[n]}))})),L=S?l.createElement(E.a,{gutter:S.gutter},K):l.createElement("ul",{className:"".concat(I,"-items")},K)}else d||T||(L=t.renderEmpty(I,a));var B=A.position||"bottom";return l.createElement("div",F({className:_},Object(b.a)(z,["rowKey","renderItem","locale"])),("top"===B||"both"===B)&&U,x&&l.createElement("div",{className:"".concat(I,"-header")},x),l.createElement(g.a,M,L,d),k&&l.createElement("div",{className:"".concat(I,"-footer")},k),h||("bottom"===B||"both"===B)&&U)};var n=e.pagination,r=n&&"object"===D(n)?n:{};return t.state={paginationCurrent:r.defaultCurrent||1,paginationSize:r.defaultPageSize||10},t}return n=i,(r=[{key:"getChildContext",value:function(){return{grid:this.props.grid,itemLayout:this.props.itemLayout}}},{key:"triggerPaginationEvent",value:function(e){var t=this;return function(n,r){var a=t.props.pagination;t.setState({paginationCurrent:n,paginationSize:r}),a&&a[e]&&a[e](n,r)}}},{key:"isSomethingAfterLastItem",value:function(){var e=this.props,t=e.loadMore,n=e.pagination,r=e.footer;return!!(t||n||r)}},{key:"render",value:function(){return l.createElement(P.a,null,this.renderList)}}])&&U(n.prototype,r),a&&U(n,a),i}(l.Component);Y.Item=A,Y.childContextTypes={grid:u.any,itemLayout:u.string},Y.defaultProps={dataSource:[],bordered:!1,split:!0,loading:!1,pagination:!1};var $=n(849),Q=n(877),W=n(73),X=n(120),Z=n(56),ee=n(847),te=n(258),ne=n(254),re=n(382),ae=ne.a.Item,oe=function(e){Object(i.a)(n,e);var t=Object(c.a)(n);function n(){var e;Object(a.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).onChange=function(t){var n=e.props,r=n.name,a=n.onChange;a(r?Object(te.a)({},r,t):t)},e}return Object(o.a)(n,[{key:"render",value:function(){var e=this.props,t=e.allowClear,n=e.label,a=e.name,o=e.mode,i=e.value,c=Object(r.a)({},m.a.omit(this.props,["label","name","onChange"]));return"multiple"!==o||i||(c.value=[]),o||t||(c.allowClear=!1),s.a.createElement(ae,{className:"dropdown-filter",label:n||m.a.capitalize(a)},s.a.createElement(re.a,Object.assign({},c,{onChange:this.onChange})))}}]),n}(s.a.PureComponent);oe.defaultProps={disabled:!1,label:"",placeholder:"all"};var ie=n(842),ce=n(153),le=n(851),se=n(256),ue=function(e){Object(i.a)(n,e);var t=Object(c.a)(n);function n(e,r){var o;return Object(a.a)(this,n),(o=t.call(this,e)).handleCreateParamProposal=function(){var e=o.props.onClose;o.form.current.validateFields((function(t,n){if(t)console.log(t);else{var r=n.value,a=n.record;o.contracts.DPoS.methods.createParamProposal.cacheSend(a,r),e()}}))},o.state={},o.form=s.a.createRef(),o.contracts=r.drizzle.contracts,o}return Object(o.a)(n,[{key:"render",value:function(){var e=this.props,t=e.visible,n=e.onClose,r=[{name:"record",field:"select",fieldOptions:{options:le.b.map((function(e,t){return[t,e]})),placeholder:"The parameter record"},rules:[{message:"Please select a record!",required:!0}]},{name:"value",label:"Value",field:"number",fieldOptions:{placeholder:"The new value"},rules:[Object(se.c)(0),{message:"Please enter a new value!",required:!0}]}];return s.a.createElement(ie.a,{title:"Create Param Proposal",visible:t,onOk:this.handleCreateParamProposal,onCancel:n},s.a.createElement(ce.a,{ref:this.form,items:r}))}}]),n}(s.a.Component);ue.contextTypes={drizzle:f.a.object};var fe=ue,pe=function(e){Object(i.a)(n,e);var t=Object(c.a)(n);function n(e,o){var i;return Object(a.a)(this,n),(i=t.call(this,e)).toggleProposalModal=function(){i.setState((function(e){return{isProposalModalVisible:!e.isProposalModalVisible}}))},i.voteParam=function(e,t){i.contracts.DPoS.methods.voteParam.cacheSend(e,t)},i.confirmParamProposal=function(e){i.contracts.DPoS.methods.confirmParamProposal.cacheSend(e)},i.updateFilter=function(e){i.setState((function(t){return{filter:Object(r.a)(Object(r.a)({},t.filter),e)}}))},i.renderFilters=function(){var e=i.state.filter.status,t=m.a.map(le.c,(function(e,t){return[e,t]}));return s.a.createElement(oe,{name:"status",options:t,style:{width:100},onChange:i.updateFilter,value:e,allowClear:!0})},i.renderProposal=function(e){var t=e.args[0],n=e.value,r=n.voteDeadline,a=n.record,o=n.newValue,c=s.a.createElement(y.a,null,m.a.map(le.d,(function(e,n){return s.a.createElement(y.a.Item,{onClick:function(){return i.voteParam(t,e)}},n)})));return s.a.createElement(Y.Item,null,s.a.createElement($.a,{actions:[s.a.createElement(Q.a,{overlay:c},s.a.createElement(W.a,{type:"link",title:"Vote",icon:"audit",size:"small"},"Vote")),s.a.createElement(W.a,{type:"link",title:"Vote",icon:"check-square",size:"small",onClick:function(){return i.confirmParamProposal(t)}},"Confirm Proposal")]},s.a.createElement(X.a,null,s.a.createElement(Z.a,{span:12},s.a.createElement(ee.a,{title:"Proposal ID",value:t})),s.a.createElement(Z.a,{span:12},s.a.createElement(ee.a,{title:"Vote Deadline",value:r})),s.a.createElement(Z.a,{span:12},s.a.createElement(ee.a,{title:"Record",value:le.b[a]})),s.a.createElement(Z.a,{span:12},s.a.createElement(ee.a,{title:"New Value",value:o})))))},i.renderProposals=function(){var e=i.props.DPoS,t=i.state.filter,n=m.a.values(e.paramProposals);return n=m.a.filter(n,(function(e){var n=e.value.status;return console.log(e.value),t.status===n})),s.a.createElement(Y,{grid:{gutter:16,column:2},dataSource:n,renderItem:i.renderProposal})},i.state={isProposalModalVisible:!1,filter:{status:"1"}},i.contracts=o.drizzle.contracts,i}return Object(o.a)(n,[{key:"render",value:function(){var e=this.state.isProposalModalVisible;return s.a.createElement($.a,{title:"Govern",extra:s.a.createElement(W.a,{type:"primary",onClick:this.toggleProposalModal},"Create Proposal")},this.renderFilters(),this.renderProposals(),s.a.createElement(fe,{visible:e,onClose:this.toggleProposalModal}))}}]),n}(s.a.Component);pe.contextTypes={drizzle:f.a.object};t.default=Object(d.drizzleConnect)(pe,(function(e){var t=e.contracts,n=e.DPoS;return{DPoS:Object(r.a)(Object(r.a)({},n),t.DPoS)}}))}}]);
//# sourceMappingURL=8.2bb4763d.chunk.js.map