(this["webpackJsonptruffle-react-redux-dapp"]=this["webpackJsonptruffle-react-redux-dapp"]||[]).push([[8],{851:function(e,a,t){"use strict";t.d(a,"a",(function(){return r})),t.d(a,"b",(function(){return n})),t.d(a,"c",(function(){return o})),t.d(a,"d",(function(){return l}));var r=["Unbonded","Bonded","Unbonding"],n=["ProposalDeposit","GovernVoteTimeout","SlashTimeout","MinValidatorNum","MaxValidatorNum","MinStakeInPool","AdvanceNoticePeriod"],o={Voting:"1",Closed:"2"},l={Yes:1,No:2,Abstain:3}},957:function(e,a,t){"use strict";t.r(a);var r=t(27),n=t(57),o=t(58),l=t(60),c=t(59),i=t(0),s=t.n(i),u=t(1),d=t.n(u),m=t(44),p=t.n(m),f=t(84),v=t(844),P=t(951),b=t(849),h=t(856),C=t(73),E=t(120),O=t(56),g=t(846),j=t(258),S=t(254),V=t(382),k=S.a.Item,y=function(e){Object(l.a)(t,e);var a=Object(c.a)(t);function t(){var e;Object(n.a)(this,t);for(var r=arguments.length,o=new Array(r),l=0;l<r;l++)o[l]=arguments[l];return(e=a.call.apply(a,[this].concat(o))).onChange=function(a){var t=e.props,r=t.name,n=t.onChange;n(r?Object(j.a)({},r,a):a)},e}return Object(o.a)(t,[{key:"render",value:function(){var e=this.props,a=e.allowClear,t=e.label,n=e.name,o=e.mode,l=e.value,c=Object(r.a)({},p.a.omit(this.props,["label","name","onChange"]));return"multiple"!==o||l||(c.value=[]),o||a||(c.allowClear=!1),s.a.createElement(k,{className:"dropdown-filter",label:t||p.a.capitalize(n)},s.a.createElement(V.a,Object.assign({},c,{onChange:this.onChange})))}}]),t}(s.a.PureComponent);y.defaultProps={disabled:!1,label:"",placeholder:"all"};var z=t(842),w=t(153),D=t(851),M=t(256),x=function(e){Object(l.a)(t,e);var a=Object(c.a)(t);function t(e,r){var o;return Object(n.a)(this,t),(o=a.call(this,e)).handleCreateParamProposal=function(){var e=o.props.onClose;o.form.current.validateFields((function(a,t){if(a)console.log(a);else{var r=t.value,n=t.record;o.contracts.DPoS.methods.createParamProposal.cacheSend(n,r),e()}}))},o.state={},o.form=s.a.createRef(),o.contracts=r.drizzle.contracts,o}return Object(o.a)(t,[{key:"render",value:function(){var e=this.props,a=e.visible,t=e.onClose,r=[{name:"record",field:"select",fieldOptions:{options:D.b.map((function(e,a){return[a,e]})),placeholder:"The parameter record"},rules:[{message:"Please select a record!",required:!0}]},{name:"value",label:"Value",field:"number",fieldOptions:{placeholder:"The new value"},rules:[Object(M.c)(0),{message:"Please enter a new value!",required:!0}]}];return s.a.createElement(z.a,{title:"Create Param Proposal",visible:a,onOk:this.handleCreateParamProposal,onCancel:t},s.a.createElement(w.a,{ref:this.form,items:r}))}}]),t}(s.a.Component);x.contextTypes={drizzle:d.a.object};var I=x,N=function(e){Object(l.a)(t,e);var a=Object(c.a)(t);function t(e,o){var l;return Object(n.a)(this,t),(l=a.call(this,e)).toggleProposalModal=function(){l.setState((function(e){return{isProposalModalVisible:!e.isProposalModalVisible}}))},l.voteParam=function(e,a){l.contracts.DPoS.methods.voteParam.cacheSend(e,a)},l.confirmParamProposal=function(e){l.contracts.DPoS.methods.confirmParamProposal.cacheSend(e)},l.updateFilter=function(e){l.setState((function(a){return{filter:Object(r.a)(Object(r.a)({},a.filter),e)}}))},l.renderFilters=function(){var e=l.state.filter.status,a=p.a.map(D.c,(function(e,a){return[e,a]}));return s.a.createElement(y,{name:"status",options:a,style:{width:100},onChange:l.updateFilter,value:e,allowClear:!0})},l.renderProposal=function(e){var a=e.args[0],t=e.value,r=t.voteDeadline,n=t.record,o=t.newValue,c=s.a.createElement(v.a,null,p.a.map(D.d,(function(e,t){return s.a.createElement(v.a.Item,{onClick:function(){return l.voteParam(a,e)}},t)})));return s.a.createElement(P.a.Item,null,s.a.createElement(b.a,{actions:[s.a.createElement(h.a,{overlay:c},s.a.createElement(C.a,{type:"link",title:"Vote",icon:"audit",size:"small"},"Vote")),s.a.createElement(C.a,{type:"link",title:"Vote",icon:"check-square",size:"small",onClick:function(){return l.confirmParamProposal(a)}},"Confirm Proposal")]},s.a.createElement(E.a,null,s.a.createElement(O.a,{span:12},s.a.createElement(g.a,{title:"Proposal ID",value:a})),s.a.createElement(O.a,{span:12},s.a.createElement(g.a,{title:"Vote Deadline",value:r})),s.a.createElement(O.a,{span:12},s.a.createElement(g.a,{title:"Record",value:D.b[n]})),s.a.createElement(O.a,{span:12},s.a.createElement(g.a,{title:"New Value",value:o})))))},l.renderProposals=function(){var e=l.props.DPoS,a=l.state.filter,t=p.a.values(e.paramProposals);return t=p.a.filter(t,(function(e){var t=e.value.status;return console.log(e.value),a.status===t})),s.a.createElement(P.a,{grid:{gutter:16,column:2},dataSource:t,renderItem:l.renderProposal})},l.state={isProposalModalVisible:!1,filter:{status:"1"}},l.contracts=o.drizzle.contracts,l}return Object(o.a)(t,[{key:"render",value:function(){var e=this.state.isProposalModalVisible;return s.a.createElement(b.a,{title:"Govern",extra:s.a.createElement(C.a,{type:"primary",onClick:this.toggleProposalModal},"Create Proposal")},this.renderFilters(),this.renderProposals(),s.a.createElement(I,{visible:e,onClose:this.toggleProposalModal}))}}]),t}(s.a.Component);N.contextTypes={drizzle:d.a.object};a.default=Object(f.drizzleConnect)(N,(function(e){var a=e.contracts,t=e.DPoS;return{DPoS:Object(r.a)(Object(r.a)({},t),a.DPoS)}}))}}]);
//# sourceMappingURL=8.5e8f2e55.chunk.js.map