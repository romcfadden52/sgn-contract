(this["webpackJsonptruffle-react-redux-dapp"]=this["webpackJsonptruffle-react-redux-dapp"]||[]).push([[10],{954:function(e,a,t){"use strict";t.r(a);var r=t(27),n=t(58),c=t(59),i=t(61),o=t(60),s=t(0),d=t.n(s),l=t(1),u=t.n(l),w=t(44),m=t.n(w),p=t(84),v=t(849),h=t(73),R=t(957),g=t(850),f=t(120),S=t(57),b=t(848),y=t(870),E=t.n(y),j=t(258),O=function(e){Object(i.a)(t,e);var a=Object(o.a)(t);function t(e,r){var c;Object(n.a)(this,t),(c=a.call(this,e)).intendWithdraw=function(){c.gateway.post("/validator/withdrawReward",{eth_addr:c.currentUser}).then((function(){v.a.success("Success! Please wait a few seconds to trigger redeem.")})).catch((function(e){console.error(e)}))},c.redeemReward=function(){c.gateway.get("/validator/rewardRequest/".concat(c.currentUser)).then((function(e){c.contracts.SGN.methods.redeemReward.cacheSend("0x"+e.data.result)})).catch((function(e){console.error(e)}))},c.renderActions=function(){return[d.a.createElement(h.a,{type:"primary",onClick:c.intendWithdraw},"Initialize Redeem"),d.a.createElement(h.a,{type:"primary",onClick:c.redeemReward},"Redeem Reward")]};var i=e.accounts,o=e.network.setting;return c.currentUser=i[0],c.contracts=r.drizzle.contracts,c.state={},c.contracts.SGN.methods.redeemedServiceReward.cacheCall(c.currentUser),c.contracts.DPoS.methods.redeemedMiningReward.cacheCall(c.currentUser),c.gateway=E.a.create({baseURL:o.gateway,timeout:1e3}),c.gateway.get("/validator/reward/".concat(c.currentUser)).then((function(e){var a=e.data.result;c.setState({miningReward:a.mining_reward,serviceReward:a.service_reward})})).catch((function(e){console.error(e),e.response?v.a.error(e.response.data.error):v.a.warning("Please config gateway url in setting to load sgn reward correctly")})),c}return Object(c.a)(t,[{key:"render",value:function(){var e=this.props,a=e.DPoS,t=e.SGN,r=this.state,n=r.miningReward,c=r.serviceReward,i=a.redeemedMiningReward,o=t.redeemedServiceReward;return m.a.isEmpty(o)||m.a.isEmpty(i)?d.a.createElement(R.a,null):d.a.createElement(g.a,{title:"Reward",actions:this.renderActions()},d.a.createElement(f.a,{style:{marginTop:"10px"}},d.a.createElement(S.a,{span:12},d.a.createElement(b.a,{title:"Cumulative Mining Reward",value:Object(j.a)(n)})),d.a.createElement(S.a,{span:12},d.a.createElement(b.a,{title:"Cumulative Service Reward",value:Object(j.a)(c)})),d.a.createElement(S.a,{span:12},d.a.createElement(b.a,{title:"Redeemed Mining Reward",value:Object(j.a)(m.a.values(i)[0].value)})),d.a.createElement(S.a,{span:12},d.a.createElement(b.a,{title:"Redeemed Service Reward",value:Object(j.a)(m.a.values(o)[0].value)}))))}}]),t}(d.a.Component);O.contextTypes={drizzle:u.a.object},a.default=Object(p.drizzleConnect)(O,(function(e){var a=e.network,t=e.accounts,n=e.contracts,c=e.DPoS,i=e.SGN;return{network:a,accounts:t,DPoS:Object(r.a)(Object(r.a)({},c),n.DPoS),SGN:Object(r.a)(Object(r.a)({},i),n.SGN)}}))}}]);
//# sourceMappingURL=10.a290c36f.chunk.js.map