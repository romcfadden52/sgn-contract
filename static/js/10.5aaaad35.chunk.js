(this["webpackJsonptruffle-react-redux-dapp"]=this["webpackJsonptruffle-react-redux-dapp"]||[]).push([[10],{954:function(e,t,a){"use strict";a.r(t);var r=a(27),n=a(58),c=a(59),i=a(61),o=a(60),s=a(0),d=a.n(s),l=a(1),u=a.n(l),m=a(44),w=a.n(m),p=a(84),v=a(849),h=a(73),R=a(957),f=a(850),g=a(120),b=a(57),S=a(848),y=a(870),j=a.n(y),E=a(258),O=function(e){Object(i.a)(a,e);var t=Object(o.a)(a);function a(e,c){var i;Object(n.a)(this,a),(i=t.call(this,e)).intendWithdraw=function(){i.gateway.post("/validator/withdrawReward",{eth_addr:i.currentUser}).then((function(){v.a.success("Success! Please wait a few seconds to trigger redeem.")})).catch((function(e){console.error(e)}))},i.redeemReward=function(){i.gateway.get("/validator/rewardRequest/".concat(i.currentUser)).then((function(e){i.contracts.SGN.methods.redeemReward.cacheSend("0x"+e.data.result)})).catch((function(e){console.error(e)}))},i.renderActions=function(){return[d.a.createElement(h.a,{type:"primary",onClick:i.intendWithdraw},"Initialize Redeem"),d.a.createElement(h.a,{type:"primary",onClick:i.redeemReward},"Redeem Reward")]};var o=e.accounts,s=e.network.setting;return i.currentUser=o[0],i.contracts=c.drizzle.contracts,i.state={},i.contracts.SGN.methods.redeemedServiceReward.cacheCall(i.currentUser),i.contracts.DPoS.methods.redeemedMiningReward.cacheCall(i.currentUser),i.gateway=j.a.create({baseURL:s.gateway,timeout:1e3}),i.gateway.get("/validator/reward/".concat(i.currentUser)).then((function(e){i.setState(Object(r.a)({},e.data.result))})).catch((function(e){console.error(e),v.a.warning("Please config gateway url in setting to load sgn reward correctly")})),i}return Object(c.a)(a,[{key:"render",value:function(){var e=this.props,t=e.DPoS,a=e.SGN,r=this.state,n=r.miningReward,c=r.serviceReward,i=t.redeemedMiningReward,o=a.redeemedServiceReward;return w.a.isEmpty(o)||w.a.isEmpty(i)?d.a.createElement(R.a,null):d.a.createElement(f.a,{title:"Reward",actions:this.renderActions()},d.a.createElement(g.a,{style:{marginTop:"10px"}},d.a.createElement(b.a,{span:12},d.a.createElement(S.a,{title:"Cumulative Mining Reward",value:Object(E.a)(n)})),d.a.createElement(b.a,{span:12},d.a.createElement(S.a,{title:"Cumulative Service Reward",value:Object(E.a)(c)})),d.a.createElement(b.a,{span:12},d.a.createElement(S.a,{title:"Redeemed Mining Reward",value:Object(E.a)(w.a.values(i)[0].value)})),d.a.createElement(b.a,{span:12},d.a.createElement(S.a,{title:"Redeemed Service Reward",value:Object(E.a)(w.a.values(o)[0].value)}))))}}]),a}(d.a.Component);O.contextTypes={drizzle:u.a.object},t.default=Object(p.drizzleConnect)(O,(function(e){var t=e.network,a=e.accounts,n=e.contracts,c=e.DPoS,i=e.SGN;return{network:t,accounts:a,DPoS:Object(r.a)(Object(r.a)({},c),n.DPoS),SGN:Object(r.a)(Object(r.a)({},i),n.SGN)}}))}}]);
//# sourceMappingURL=10.5aaaad35.chunk.js.map